{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/solorzao/openclaw-minecraft-plugin/schemas/commands.schema.json",
  "title": "OpenClaw Minecraft Bot Commands",
  "description": "Schema for commands.json - actions written by AI agent, executed by bot",
  "type": "array",
  "items": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "description": "Unique command ID for tracking results in events.json"
      },
      "action": {
        "type": "string",
        "enum": [
          "goto", "follow", "stop", "look_at_player", "look_at", "jump", "sneak", "steer", "mount", "dismount",
          "attack", "shoot", "block_shield",
          "dig", "mine_resource", "find_food", "collect_items", "drop", "give",
          "craft", "smelt", "cook_food",
          "place", "build",
          "till", "plant", "harvest", "farm",
          "chat", "equip", "eat", "sleep", "activate", "fish", "use_on", "trade", "brew", "enchant",
          "store_items", "retrieve_items", "manage_inventory",
          "scan", "find_blocks", "where_am_i", "list_recipes", "goto_block",
          "verify", "cancel", "inspect_container", "set_note", "get_notes", "ack_events",
          "goal"
        ],
        "description": "Action to execute"
      }
    },
    "required": ["action"],
    "allOf": [
      {
        "if": { "properties": { "action": { "const": "goto" } } },
        "then": {
          "properties": {
            "x": { "type": "integer" },
            "y": { "type": "integer", "minimum": -64, "maximum": 320 },
            "z": { "type": "integer" }
          },
          "required": ["action", "x", "y", "z"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "follow" } } },
        "then": {
          "properties": {
            "username": { "type": "string" },
            "distance": { "type": "number", "minimum": 1, "maximum": 10, "default": 2 }
          },
          "required": ["action", "username"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "look_at_player" } } },
        "then": {
          "properties": {
            "username": { "type": "string" }
          },
          "required": ["action", "username"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "look_at" } } },
        "then": {
          "properties": {
            "x": { "type": "number" },
            "y": { "type": "number" },
            "z": { "type": "number" }
          },
          "required": ["action", "x", "y", "z"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "sneak" } } },
        "then": {
          "properties": {
            "duration": { "type": "integer", "minimum": 100, "maximum": 5000, "default": 500 }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "steer" } } },
        "then": {
          "properties": {
            "direction": { "type": "string", "enum": ["forward", "back", "left", "right"] },
            "duration": { "type": "integer", "default": 1000 }
          },
          "required": ["action", "direction"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "mount" } } },
        "then": {
          "properties": {
            "entityId": { "type": "integer", "description": "Optional. If omitted, mounts nearest mountable entity." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "attack" } } },
        "then": {
          "properties": {
            "target": { "type": "string", "description": "Mob type. If omitted, attacks nearest hostile." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "shoot" } } },
        "then": {
          "properties": {
            "target": { "type": "string", "description": "Mob type. If omitted, shoots nearest hostile." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "dig" } } },
        "then": {
          "properties": {
            "position": { "$ref": "#/definitions/Position" },
            "direction": { "type": "string", "enum": ["front", "back", "left", "right", "above", "below"] }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "mine_resource" } } },
        "then": {
          "properties": {
            "resource": { "type": "string", "description": "Block name (e.g., iron_ore, coal_ore, diamond_ore)" },
            "count": { "type": "integer", "minimum": 1, "default": 5 }
          },
          "required": ["action", "resource"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "collect_items" } } },
        "then": {
          "properties": {
            "radius": { "type": "integer", "default": 16 }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "drop" } } },
        "then": {
          "properties": {
            "item": { "type": "string" },
            "count": { "type": "integer" }
          },
          "required": ["action", "item"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "give" } } },
        "then": {
          "properties": {
            "username": { "type": "string" },
            "item": { "type": "string" },
            "count": { "type": "integer" }
          },
          "required": ["action", "username", "item"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "craft" } } },
        "then": {
          "properties": {
            "item": { "type": "string", "description": "Item to craft (e.g., wooden_pickaxe, crafting_table)" },
            "count": { "type": "integer", "minimum": 1, "default": 1 }
          },
          "required": ["action", "item"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "smelt" } } },
        "then": {
          "properties": {
            "item": { "type": "string", "description": "Item to smelt (e.g., iron_ore, raw_iron)" },
            "count": { "type": "integer", "minimum": 1 }
          },
          "required": ["action", "item"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "place" } } },
        "then": {
          "properties": {
            "blockType": { "type": "string" },
            "position": { "$ref": "#/definitions/Position" }
          },
          "required": ["action", "blockType"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "build" } } },
        "then": {
          "properties": {
            "template": { "type": "string", "enum": ["shelter_3x3", "pillar", "bridge", "wall"] },
            "material": { "type": "string", "default": "cobblestone" }
          },
          "required": ["action", "template"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "till" } } },
        "then": {
          "properties": {
            "radius": { "type": "integer", "minimum": 1, "maximum": 10, "default": 5 }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "plant" } } },
        "then": {
          "properties": {
            "crop": { "type": "string", "enum": ["wheat", "carrot", "potato", "beetroot", "melon", "pumpkin", "nether_wart"], "default": "wheat" }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "harvest" } } },
        "then": {
          "properties": {
            "autoReplant": { "type": "boolean", "default": true }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "farm" } } },
        "then": {
          "properties": {
            "crop": { "type": "string", "default": "wheat" }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "chat" } } },
        "then": {
          "properties": {
            "message": { "type": "string", "maxLength": 256 }
          },
          "required": ["action", "message"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "equip" } } },
        "then": {
          "properties": {
            "item": { "type": "string" },
            "hand": { "type": "string", "enum": ["main", "off"], "default": "main" }
          },
          "required": ["action", "item"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "activate" } } },
        "then": {
          "properties": {
            "position": { "$ref": "#/definitions/Position" }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "use_on" } } },
        "then": {
          "properties": {
            "entityId": { "type": "integer" },
            "entityType": { "type": "string" }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "trade" } } },
        "then": {
          "properties": {
            "index": { "type": "integer", "minimum": 0, "default": 0 }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "store_items" } } },
        "then": {
          "properties": {
            "items": { "type": "array", "items": { "type": "string" }, "description": "Item name filters. If omitted, stores non-essential items." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "retrieve_items" } } },
        "then": {
          "properties": {
            "items": { "type": "array", "items": { "type": "string" }, "description": "Item name filters. If omitted, retrieves everything." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "scan" } } },
        "then": {
          "properties": {
            "radius": { "type": "integer", "minimum": 8, "maximum": 32, "default": 32, "description": "Scan radius in blocks" }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "find_blocks" } } },
        "then": {
          "properties": {
            "blockType": { "type": "string", "description": "Block name to search for (e.g., diamond_ore, chest)" },
            "maxDistance": { "type": "integer", "minimum": 1, "maximum": 128, "default": 64 },
            "count": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          },
          "required": ["action", "blockType"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "list_recipes" } } },
        "then": {
          "properties": {
            "item": { "type": "string", "description": "Item name. If omitted, lists all craftable items from current inventory." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "goto_block" } } },
        "then": {
          "properties": {
            "blockType": { "type": "string", "description": "Block name to navigate to (e.g., crafting_table, chest)" },
            "maxDistance": { "type": "integer", "minimum": 1, "maximum": 128, "default": 64 }
          },
          "required": ["action", "blockType"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "verify" } } },
        "then": {
          "properties": {
            "check": { "type": "string", "enum": ["craft", "smelt", "goto", "attack", "sleep", "mine"], "description": "Action to verify feasibility of" },
            "item": { "type": "string", "description": "Item name (for craft/smelt checks)" },
            "recipe": { "type": "string", "description": "Alias for item (for craft checks)" },
            "resource": { "type": "string", "description": "Resource name (for mine checks)" },
            "target": { "type": "string", "description": "Target name (for attack/mine checks)" },
            "x": { "type": "integer", "description": "X coordinate (for goto checks)" },
            "y": { "type": "integer", "description": "Y coordinate (for goto checks)" },
            "z": { "type": "integer", "description": "Z coordinate (for goto checks)" }
          },
          "required": ["action", "check"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "inspect_container" } } },
        "then": {
          "properties": {
            "position": { "$ref": "#/definitions/Position", "description": "Position of the container. If omitted, finds nearest." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "set_note" } } },
        "then": {
          "properties": {
            "key": { "type": "string", "description": "Note key (e.g., 'base_location', 'current_goal')" },
            "value": { "type": "string", "description": "Note value. Set to empty string or null to delete." }
          },
          "required": ["action", "key"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "get_notes" } } },
        "then": {
          "properties": {
            "key": { "type": "string", "description": "Specific note key to retrieve. If omitted, returns all notes." }
          }
        }
      },
      {
        "if": { "properties": { "action": { "const": "ack_events" } } },
        "then": {
          "properties": {
            "eventId": { "type": "integer", "minimum": 0, "description": "Highest event ID you have processed. Events with id <= this will be considered handled." }
          },
          "required": ["action", "eventId"]
        }
      },
      {
        "if": { "properties": { "action": { "const": "goal" } } },
        "then": {
          "properties": {
            "goal": { "type": "string", "description": "Goal text. Built-in goals 'gather_wood' and 'explore' also trigger pathfinding. Any other string is tracked as a freeform objective. Use 'none' or 'clear' to clear." }
          },
          "required": ["action", "goal"]
        }
      }
    ]
  },
  "definitions": {
    "Position": {
      "type": "object",
      "properties": {
        "x": { "type": "integer" },
        "y": { "type": "integer" },
        "z": { "type": "integer" }
      },
      "required": ["x", "y", "z"]
    }
  }
}
